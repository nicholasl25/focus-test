<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>30-Second Challenge</title>
<style>
  :root{--bg:#0f1724;--card:#071026;--accent:#38bdf8;--muted:#94a3b8}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#e6eef6;background:linear-gradient(180deg,var(--bg),#051023 70%);}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
  .card{width:760px;max-width:96vw;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:28px;box-shadow:0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
  h1{margin:0 0 8px;font-size:20px}
  p.lead{margin:0 0 18px;color:var(--muted)}
  .big{font-size:28px;font-weight:600}
  .start{display:inline-flex;gap:10px;align-items:center;padding:12px 18px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#60a5fa);color:#012;cursor:pointer;border:none;font-weight:700;box-shadow:0 6px 18px rgba(56,189,248,0.18)}
  .hint{margin-top:12px;color:var(--muted);font-size:13px}
  .progressWrap{margin-top:20px;background:#031025;border-radius:10px;padding:16px;display:none;flex-direction:column;gap:12px}
  .bar{height:18px;background:#071828;border-radius:9px;overflow:hidden}
  .barInner{height:100%;width:0%;border-radius:9px;background:linear-gradient(90deg,var(--accent),#7dd3fc);transition:width 0.3s linear}
  .percent{font-weight:700}
  .foot{margin-top:14px;color:var(--muted);font-size:13px}

  /* modal */
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(1,6,18,0.6),rgba(1,6,18,0.9));backdrop-filter:blur(3px);z-index:9999}
  .modalCard{background:#fff;color:#012;border-radius:12px;padding:28px;max-width:720px;width:92%;box-shadow:0 18px 50px rgba(2,6,23,0.6);text-align:center}
  .modalCard h2{margin:0 0 12px;font-size:22px}
  .modalCard p{margin:0 0 18px;color:#102233}

  /* mobile drag game */
  .dragArea{display:flex;justify-content:center;align-items:center;gap:60px;flex-wrap:wrap;margin-top:25px;position:relative;}
  .draggable{font-size:60px;touch-action:none;user-select:none;position:absolute;}
  .dropzone{width:100px;height:120px;border:3px dashed #001f3f;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#001f3f;font-weight:700;transition:background 0.3s;position:relative;}
  .success{font-size:22px;font-weight:700;color:#16a34a;margin-top:16px;animation:pop 0.6s ease;}
  @keyframes pop{0%{transform:scale(0.7);opacity:0;}100%{transform:scale(1);opacity:1;}}
  input.nameInput{padding:10px 14px;border-radius:8px;border:1px solid #1e293b;background:#0b162a;color:#e6eef6;font-size:15px;outline:none;width:220px;}
</style>
</head>
<body>
<div class="wrap">
  <div class="card" role="main" aria-labelledby="title">
    <h1 id="title">30-Second Focus Challenge</h1>
    <p class="lead">Enter your name, press <strong>Start</strong>, and follow the on-screen prompt.</p>

    <div style="display:flex;gap:16px;align-items:center;flex-wrap:wrap">
      <input type="text" id="nameInput" class="nameInput" placeholder="Enter your name" aria-label="Your name" />
      <button class="start" id="startBtn" aria-label="Start challenge">Start challenge</button>
      <div class="hint">Recommended: open in fullscreen for the best experience.</div>
    </div>

    <div class="progressWrap" id="progressBlock" aria-hidden="true">
      <div class="big" id="stageText">Preparing the challenge‚Ä¶</div>
      <div class="bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
        <div class="barInner" id="barInner"></div>
      </div>
      <div style="display:flex;justify-content:space-between;font-size:13px;color:var(--muted)">
        <div id="leftNote">Do not switch tabs</div>
        <div class="percent" id="percentText">0%</div>
      </div>
      <div class="foot">This is just a short simulation ‚Äî keep your eyes on the center</div>
    </div>
  </div>
</div>

<!-- modal -->
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modalCard">
    <h2 id="modalTitle"></h2>
    <p id="modalMessage"></p>

    <div class="dragArea" id="dragArea">
      <div class="draggable" id="fries">üçü</div>
      <div class="dropzone" id="bag">üëú Bag</div>
    </div>
    <div id="successMsg"></div>
  </div>
</div>

<script>
const delayMs = 6000;
const startBtn = document.getElementById('startBtn');
const progressBlock = document.getElementById('progressBlock');
const barInner = document.getElementById('barInner');
const percentText = document.getElementById('percentText');
const stageText = document.getElementById('stageText');
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modalTitle');
const modalMessageEl = document.getElementById('modalMessage');
const nameInput = document.getElementById('nameInput');
const fries = document.getElementById('fries');
const bag = document.getElementById('bag');
const successMsg = document.getElementById('successMsg');

// start progress bar
function startProgress(totalMs){
  progressBlock.style.display = 'flex';
  progressBlock.setAttribute('aria-hidden','false');
  let start = null;
  const duration = totalMs;
  function step(ts){
    if(!start) start = ts;
    const elapsed = ts - start;
    const pct = Math.min(100, Math.floor((elapsed/duration) * 100));
    barInner.style.width = pct + '%';
    percentText.textContent = pct + '%';
    if(pct < 30) stageText.textContent = 'Initializing‚Ä¶';
    else if(pct < 70) stageText.textContent = 'Running checks‚Ä¶';
    else if(pct < 100) stageText.textContent = 'Finalizing‚Ä¶';
    else stageText.textContent = 'Complete';
    if(pct < 100) requestAnimationFrame(step);
    else setTimeout(showModal, 700);
  }
  requestAnimationFrame(step);
}

// show modal
function showModal(){
  const name = nameInput.value.trim() || "there";
  modalTitle.textContent = `Hey ${name},`;
  modalMessageEl.textContent = "Put the fries in the bag!";
  modal.style.display = 'flex';
  modal.setAttribute('aria-hidden','false');
}

// mobile touch drag
function makeDraggable(el, dropzone){
  let offsetX = 0, offsetY = 0;
  el.addEventListener('touchstart', e=>{
    const touch = e.touches[0];
    const rect = el.getBoundingClientRect();
    offsetX = touch.clientX - rect.left;
    offsetY = touch.clientY - rect.top;
    el.style.position = 'absolute';
    el.style.zIndex = 1000;
  });

  el.addEventListener('touchmove', e=>{
    e.preventDefault();
    const touch = e.touches[0];
    el.style.left = (touch.clientX - offsetX) + 'px';
    el.style.top = (touch.clientY - offsetY) + 'px';
  });

  el.addEventListener('touchend', e=>{
    const rect = el.getBoundingClientRect();
    const dropRect = dropzone.getBoundingClientRect();
    if (
      rect.left + rect.width/2 > dropRect.left &&
      rect.right - rect.width/2 < dropRect.right &&
      rect.top + rect.height/2 > dropRect.top &&
      rect.bottom - rect.height/2 < dropRect.bottom
    ){
      successMsg.innerHTML = '<div class="success">‚úÖ Fries secured!</div>';
      el.style.display = 'none';
    }
  });
}

makeDraggable(fries, bag);

startBtn.addEventListener('click', () => {
  if(!nameInput.value.trim()){
    alert("Please enter your name first!");
    return;
  }
  startBtn.disabled = true;
  startBtn.style.opacity = 0.7;
  startProgress(delayMs);
});
</script>
</body>
</html>

